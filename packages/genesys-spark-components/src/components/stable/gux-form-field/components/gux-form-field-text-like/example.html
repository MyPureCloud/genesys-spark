<h1>gux-form-field-text-like</h1>

<p>
  slot a input[type=email] / input[type=password] / input[type=text] element
  into a gux-form-field-text-like element
</p>

<h2>Examples</h2>
<form onchange="notify(event)" oninput="notify(event)">
  <fieldset>
    <legend>Input types</legend>

    <gux-form-field-text-like>
      <input id="abc" slot="input" type="text" name="t-1" value="Sample text" />
      <label for="abc" slot="label">Text</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <input slot="input" type="password" name="t-2" value="Pa55word" />
      <label slot="label">Password</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <input
        slot="input"
        type="email"
        name="t-3"
        value="joe.bloggs@example.com"
      />
      <label slot="label">Email</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Clearable</legend>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="c-1" value="Sample text" />
      <label slot="label">Default</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like clearable>
      <input
        slot="input"
        type="text"
        name="c-2"
        value="Sample text"
        placeholder="placeholder"
      />
      <label slot="label">True</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like clearable>
      <input slot="input" type="text" name="c-3" disabled value="Sample text" />
      <label slot="label">True and disabled</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like clearable="false">
      <input slot="input" type="text" name="c-4" value="Sample text" />
      <label slot="label">False</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Programmatically set input value</legend>
    <span
      >Use the `guxForceUpdate` method on the form field component to update the
      state of the clearable form after programmatically setting the input
      value</span
    >
    <gux-form-field-text-like id="setInputExampleFormField" clearable>
      <input
        id="setInputExample"
        slot="input"
        type="text"
        name="c-4"
        value="Sample text"
      />
      <label slot="label">Programmatically set input value</label>
    </gux-form-field-text-like>

    <gux-button-slot>
      <button
        type="button"
        onclick="(function () {
          const formField = document.getElementById('setInputExampleFormField');
          const input = document.getElementById('setInputExample');

          input.value = '';
          formField.guxForceUpdate();
        })()"
      >
        Clear input field
      </button>
    </gux-button-slot>

    <gux-button-slot>
      <button
        type="button"
        onclick="(function () {
          const formField = document.getElementById('setInputExampleFormField');
          const input = document.getElementById('setInputExample');
          input.value = 'New Value';
          formField.guxForceUpdate();
        })()"
      >
        Set input field with new value
      </button>
    </gux-button-slot>
  </fieldset>

  <fieldset>
    <legend>Label Position</legend>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="lp-1" />
      <label slot="label">Default</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="lp-2" />
      <label slot="label">Default long label</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like label-position="above">
      <input slot="input" type="text" name="lp-3" />
      <label slot="label">Above</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like label-position="beside">
      <input slot="input" type="text" name="lp-4" />
      <label slot="label">Beside</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like label-position="screenreader">
      <input slot="input" type="text" name="lp-5" />
      <label slot="label">Screenreader</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Prefix / Suffix</legend>

    <gux-form-field-text-like>
      <span slot="prefix">$</span>
      <input
        slot="input"
        type="text"
        name="t-1"
        placeholder="Enter amount here"
      />
      <label slot="label">Prefix</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="t-1" placeholder="Enter email" />
      <span slot="suffix">@genesys.com</span>
      <label slot="label">Suffix</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <span slot="prefix">$</span>
      <input slot="input" type="text" name="t-1" placeholder="Enter amount" />
      <span slot="suffix">per day</span>
      <label slot="label">Allowance</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Input attributes</legend>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="a-1" disabled />
      <label slot="label">Disabled</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="a-2" required />
      <label slot="label">Required</label>
    </gux-form-field-text-like>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="a-3" placeholder="Enter number" />
      <label slot="label">Placeholder</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Error</legend>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="e-1" />
      <label slot="label">Default</label>
      <span slot="error">This is an error message</span>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Help</legend>

    <gux-form-field-text-like>
      <input slot="input" type="text" name="e-1" />
      <label slot="label">Default</label>
      <span slot="help">This is a help message</span>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Loading</legend>
    <gux-form-field-text-like loading>
      <input slot="input" type="text" name="e-1" />
      <label slot="label">Default</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Loading dynamically set</legend>
    <gux-form-field-text-like id="dynamic-loading" loading>
      <input slot="input" type="text" name="e-1" />
      <label slot="label">Default</label>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Label Info</legend>
    <gux-form-field-text-like loading>
      <input slot="input" type="text" name="e-1" />
      <label slot="label">Default</label>
      <gux-label-info-beta slot="label-info">
        <span slot="content">This is some tooltip text</span>
      </gux-label-info-beta>
    </gux-form-field-text-like>
  </fieldset>

  <fieldset>
    <legend>Indicator Mark</legend>
    <a href="gux-form-field-label-indicator.html"
      >Click here for usage examples</a
    >
  </fieldset>

  <fieldset>
    <legend>Accessibility</legend>

    <h3>Error</h3>
    <h4>
      When indicating an error state it is good to apply an aria-invalid
      attribute to the input element. The aria-invalid attribute is used to
      indicate that the value entered into an input field is not in a format or
      a value the application will accept.
    </h4>
    <h4>
      We also apply the role="alert" to the error state internally so that the
      error is read immediately when displayed.
    </h4>

    <gux-form-field-text-like id="dynamic-loading">
      <input id="textInput" slot="input" type="text" name="e-1" />
      <label slot="label">Default</label>
    </gux-form-field-text-like>
  </fieldset>
</form>

<style
  onload="(function () {
  window.setInterval(() => {
    document.getElementById('dynamic-loading').toggleAttribute('loading');
  }, 3000);

  const textInput = document.querySelector('#textInput');
  const formField = textInput.closest('gux-form-field-text-like');
  let isErrorShown = false;

  setInterval(() => {
    if (isErrorShown) {
      // Remove error span
      const errorSpan = formField.querySelector('span[slot=error]');
      if (errorSpan) {
        errorSpan.remove();
      }
      // Remove aria-invalid
      textInput.removeAttribute('aria-invalid');
    } else {
      // Create and add error span
      const errorSpan = document.createElement('span');
      errorSpan.setAttribute('slot', 'error');
      errorSpan.textContent = 'Subject to availability';
      formField.appendChild(errorSpan);
      // Add aria-invalid
      textInput.setAttribute('aria-invalid', 'true');
    }
    isErrorShown = !isErrorShown;
  }, 5000);


})()"
>
  gux-form-field-text-like {
    margin: 10px;
  }
</style>
