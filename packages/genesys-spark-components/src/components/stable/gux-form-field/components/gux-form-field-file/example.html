<h1>gux-form-field-file</h1>
<form onchange="notify(event)" oninput="notify(event)">
  <fieldset>
    <legend>Label Position</legend>

    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar"
        name="avatar"
        accept="image/png, image/jpeg"
        slot="input"
      />
    </gux-form-field-file>

    <gux-form-field-file label-position="beside">
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar2"
        name="avatar2"
        accept="image/png, image/jpeg"
        slot="input"
      />
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <legend>Disabled</legend>
    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar3"
        name="avatar3"
        accept="image/png, image/jpeg"
        slot="input"
        disabled
      />
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <legend>Required</legend>
    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar4"
        name="avatar4"
        accept="image/png, image/jpeg"
        slot="input"
        required
      />
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <legend>Error</legend>
    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar5"
        name="avatar5"
        accept="image/png, image/jpeg"
        slot="input"
      />
      <span slot="error">This is an error message</span>
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <legend>Help</legend>
    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar6"
        name="avatar6"
        accept="image/png, image/jpeg"
        slot="input"
      />
      <span slot="help">This is a help message</span>
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <legend>Label Info</legend>
    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar"
        name="avatar"
        accept="image/png, image/jpeg"
        slot="input"
      />
      <gux-label-info-beta slot="label-info">
        <span slot="content">This is some <b>tooltip</b> text</span>
      </gux-label-info-beta>
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <legend>Optional</legend>
    <gux-form-field-file indicator-mark="optional">
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar"
        name="avatar"
        accept="image/png, image/jpeg"
        slot="input"
      />
    </gux-form-field-file>

    <gux-form-field-file indicator-mark="optional">
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="avatar"
        name="avatar"
        accept="image/png, image/jpeg"
        slot="input"
        required
      />
    </gux-form-field-file>
  </fieldset>

  <fieldset>
    <h2>Accessibility</h2>

    <h3>Error</h3>
    <h4>
      When indicating an error state it is good to apply an aria-invalid
      attribute to the input element. The aria-invalid attribute is used to
      indicate that the value entered into an input field is not in a format or
      a value the application will accept.
    </h4>
    <h4>
      We also apply the role="alert" to the error state internally so that the
      error is read immediately when displayed.
    </h4>

    <gux-form-field-file>
      <label slot="label">Upload a profile picture</label>
      <input
        type="file"
        id="fileInput"
        name="avatar5"
        accept="image/png, image/jpeg"
        slot="input"
      />
    </gux-form-field-file>
  </fieldset>
</form>

<style
  onload="(function () {
  const fileInput = document.querySelector('#fileInput');
  const formField = fileInput.closest('gux-form-field-file');
  let isErrorShown = false;

  setInterval(() => {
    if (isErrorShown) {
      // Remove error span
      const errorSpan = formField.querySelector('span[slot=error]');
      if (errorSpan) {
        errorSpan.remove();
      }
      // Remove aria-invalid
      fileInput.removeAttribute('aria-invalid');
    } else {
      // Create and add error span
      const errorSpan = document.createElement('span');
      errorSpan.setAttribute('slot', 'error');
      errorSpan.textContent = 'This is an error message';
      formField.appendChild(errorSpan);
      // Add aria-invalid
      fileInput.setAttribute('aria-invalid', 'true');
    }
    isErrorShown = !isErrorShown;
  }, 5000);
  })()"
>
  gux-form-field-file {
    margin-block-end: 12px;
  }

  fieldset {
    margin-block-end: 12px;
  }
</style>
